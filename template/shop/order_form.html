{% extends "base.html" %}

{% block item %}
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class='mb-0'>Order Form</h4>
                </div>
                <div class="card-body">
                    <form method="POST">
                        {% csrf_token %}

                <div class="mb-3">
                    <label>Product</label>
                    <input type="text" value="{{ product.name }}" disabled class="form-control mb-2">
                    <input type="hidden" name="product" value="{{ product.name }}">
                </div>

                <div class="mb-3">
                    <label>Price (per item)</label>
                    <input id="price" type="number" value="{{ product.price }}" disabled class="form-control mb-2">
                    <input type="hidden" name="price" value="{{ product.price }}">
                </div>

                    <div class="mb-3">{{ form.name }}</div>
                    <div class="mb-3">{{ form.phone }}</div>
                    <div class="mb-3">{{ form.address }}</div>
                    <div class="mb-3">{{ form.city }}</div>
                    <div class="mb-3">{{ form.district }}</div>
                    <div class="mb-3">{{ form.color }}</div>

                <div class="mb-3">
                    <label>Quantity</label>
                    <input id="qty" name="quantity" type="number" value="1" min="1" class="form-control mb-2">
                </div>
                   
                <div class="mb-3">
                    <label>Total Price</label>
                    <input id="total" name="total_price" type="number" readonly class="form-control mb-3">
                </div>

                <div class="mb-3">
                    <button type="submit" class="btn btn-success mt-2">Order Now</button>
                </div>

                </form>
            </div>
        </div>               
    </div>

<script>
    function updateTotal() {
        let price = parseFloat(document.getElementById("price").value);
        let qty = parseInt(document.getElementById("qty").value);
        document.getElementById("total").value = price * qty;
    }

    document.getElementById("qty").addEventListener("input", updateTotal);
    updateTotal();
</script>

{% endblock %}
